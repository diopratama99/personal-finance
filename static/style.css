/* ===== THEME ===== */
:root{
  --bg:#0f5132;                 /* navbar */
  --page:#e9eef6;               /* background */
  --card:rgba(255,255,255,.6);  /* glass */
  --text:#102132;
  --muted:#6c7a89;
  --primary:#1a7f5a;
  --ring:rgba(26,127,90,.35);
  --glass-border:rgba(255,255,255,.32);
  --chart-bar:45, 156, 219;     /* R,G,B untuk chart */
}
html[data-theme="dark"]{
  --bg:#0b3f29;
  --page:#0d1117;
  --card:rgba(17,24,39,.55);
  --text:#e6edf3;
  --muted:#9aa4b2;
  --primary:#2dd4bf;
  --ring:rgba(45,212,191,.35);
  --glass-border:rgba(255,255,255,.12);
  --chart-bar:45, 212, 191;
}

*{scroll-behavior:smooth}
body{
  background:var(--page);
  color:var(--text);
  font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol", sans-serif;
  font-feature-settings: "cv01","cv02";
}

h1,h2,h3,.display-6{ font-weight:700; letter-spacing:.2px }
.navbar-brand{ font-weight:800; letter-spacing:.3px }

.bg-deep{background:var(--bg)!important}

.navbar .btn{border-radius:999px;padding:.35rem .9rem}
.btn{transition:transform .15s ease, box-shadow .2s ease}
.btn-compact{ padding:.3rem .6rem; border-radius:12px; }
.btn:active{transform:translateY(1px)}
.btn-primary{background:var(--primary);border-color:var(--primary)}
.btn-outline-primary{border-color:var(--primary);color:var(--primary)}
.btn-outline-primary:hover{background:var(--primary);color:#fff}

.form-control,.form-select{
  background:rgba(255,255,255,.65);color:var(--text);
  border:1px solid rgba(0,0,0,.08)
}
html[data-theme="dark"] .form-control,
html[data-theme="dark"] .form-select{background:rgba(255,255,255,.06)}
.form-control:focus,.form-select:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)}

.table>thead th{color:var(--muted);font-weight:600;letter-spacing:.01em}
.table-hover tbody tr:hover{background:rgba(0,0,0,.035)}

/* ===== GLASS CARD ===== */
.card-soft{
  background:var(--card);
  border:1px solid var(--glass-border);
  border-radius:18px;
  padding:18px;
  box-shadow:
    0 10px 30px rgba(10,14,29,.08),
    inset 0 1px 0 rgba(255,255,255,.25);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
}
.card-soft:hover{transform:translateY(-2px);box-shadow:0 18px 45px rgba(12,18,28,.12)}

/* ===== BACKGROUND DECOR ===== */
.bg-decor{position:fixed;inset:0;pointer-events:none;z-index:-1;overflow:hidden}
.bg-decor .blob{
  position:absolute;filter:blur(40px);opacity:.55;border-radius:50%;
  animation:floaty 16s ease-in-out infinite alternate;
}
.bg-decor .b1{width:520px;height:520px;background:radial-gradient(circle at 30% 30%, #7dd3fc, transparent 60%);left:-140px;top:-120px}
.bg-decor .b2{width:520px;height:520px;background:radial-gradient(circle at 70% 20%, #34d399, transparent 60%);right:-160px;top:-120px;animation-delay:2s}
.bg-decor .b3{width:520px;height:520px;background:radial-gradient(circle at 40% 70%, #f472b6, transparent 60%);left:30%;bottom:-160px;animation-delay:1s}
.bg-decor .grain{
  position:absolute;inset:0;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity=".035"/></svg>');
  mix-blend-mode:soft-light;opacity:.7
}
@keyframes floaty{
  0%{transform:translate3d(0,0,0) scale(1)}
  100%{transform:translate3d(0,-20px,0) scale(1.05)}
}

/* ===== CHART WRAPPER ===== */
.chart-box{position:relative;width:100%;height:360px}
.chart-box canvas{width:100%!important;height:100%!important;display:block}

/* ===== AUTH CARD ===== */
.auth-card{max-width:420px;background:var(--card);padding:28px;border-radius:18px;
  border:1px solid var(--glass-border);backdrop-filter:blur(14px);box-shadow:0 18px 45px rgba(12,18,28,.12)}

/* ===== SMALL GOODIES ===== */
.progress.budget{height:10px;background:rgba(0,0,0,.08);border-radius:10px;overflow:hidden}
.display-6{font-size:1.6rem}

/* Password eye inside input */
.password-wrapper{ position:relative; }
.password-wrapper .password-toggle{
  position:absolute; right:.55rem; top:50%; transform:translateY(-50%);
  border:0; background:transparent; color:var(--primary); padding:.25rem; line-height:1;
}
.password-wrapper .password-toggle:focus{ outline: none; box-shadow:none; }
/* Hide native Edge/IE eye to avoid duplicate */
input[type="password"]::-ms-reveal{ display:none; }
input[type="password"]::-ms-clear{ display:none; }

/* ===== LOGIN HERO ===== */
.login-hero{ height:100vh; justify-content:center; padding-top:0; }
@media (min-width:768px){ .login-hero{ height:100vh; } }
@media (min-width:992px){ .login-hero{ height:100vh; } }
.login-logo{
  width:56px; height:56px; border-radius:16px;
  display:grid; place-items:center; font-size:28px;
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.75));
  box-shadow:0 10px 30px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.7);
}
.login-brand{ font-size:1.6rem; letter-spacing:.3px }
.login-sub{ font-size:.95rem }
.login-hero .auth-card{ box-shadow:0 22px 60px rgba(12,18,28,.18); }

/* Smaller card title for consistency */
.auth-card h4{ font-size:1.2rem; font-weight:700; letter-spacing:.2px; }

/* ====== Mobile polish ====== */
.navbar-brand{ font-weight:800; letter-spacing:.2px }
.navbar-toggler{ border-color: rgba(255,255,255,.25); }
.navbar-toggler:focus{ box-shadow:0 0 0 .15rem rgba(255,255,255,.25) }
.navbar-dark .navbar-toggler-icon{
  /* hamburger icon warna putih */
  background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255,255,255,.9)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* Scrollable chips untuk aksi cepat di HP */
.chips-scroll{
  display:flex; gap:.5rem; overflow-x:auto; padding:.25rem .25rem .5rem;
  scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;
}
.chip{
  flex:0 0 auto; scroll-snap-align:center;
  border-radius:999px; border:1px solid var(--glass-border, rgba(255,255,255,.35));
  background:var(--card, rgba(255,255,255,.7));
  padding:.55rem .9rem; text-decoration:none; color:var(--text,#0b2239);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 8px 22px rgba(12,18,28,.06);
  white-space:nowrap;
}
.chip:active{ transform:translateY(1px) }
.chip-primary{ background:#fff; border-color:#fff; color:#0b2239; font-weight:600 }
.chip-primary-outline{ background:transparent; border-color:#fff; color:#fff }

/* Card & form lebih rapat di HP */
@media (max-width: 576px){
  .card{ border-radius:16px; }
  .card .card-body{ padding:1rem; }
  .btn{ padding:.55rem .9rem; border-radius:14px; }

  /* ringkasan angka agar tidak ‘meledak’ */
  .display-amount, .summary-amount, .lead{
    font-size: clamp(1rem, 4.5vw, 1.35rem);
    line-height:1.25;
  }

  /* grid filter tanggal */
  .filter-grid .col-auto, .filter-grid .col{
    flex: 0 0 100%; max-width:100%;
  }
  .filter-grid .btn{ width:100% }

  /* chart tinggi proporsional */
  .chart-card canvas{ max-height: 340px; }
}

/* Offcanvas list look nicer */
.offcanvas.text-bg-dark .list-group-item{
  border: 0; padding:.75rem 0; color:#e8eef5;
}
.offcanvas.text-bg-dark .list-group-item:hover{ color:#fff }

/* Font global */
body { font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

/* Glassy background */
.bg-layer{
  position: fixed; inset: 0;
  background: radial-gradient(1200px 600px at 20% -10%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(800px 500px at 120% 10%, rgba(255,255,255,.25), transparent 50%),
              linear-gradient(180deg, rgba(10,97,60,.07), rgba(10,97,60,0));
  pointer-events: none;        /* penting: jangan blok klik */
  z-index: 0;
}

/* Navbar harus di atas layer dekorasi */
.navbar { position: sticky; top: 0; z-index: 1100; }
.navbar .navbar-toggler { position: relative; z-index: 1101; }
.navbar-dark .navbar-toggler-icon{
  background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255,255,255,.9)' stroke-width='2' stroke-linecap='round' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* Chips (aksi cepat mobile) */
.chips-scroll{ display:flex; gap:.5rem; overflow-x:auto; padding:.25rem .25rem .5rem; -webkit-overflow-scrolling:touch; }
.chip{
  flex:0 0 auto; text-decoration:none; white-space:nowrap;
  border-radius:999px; border:1px solid rgba(255,255,255,.55);
  background:rgba(255,255,255,.8); color:#0b2239; padding:.55rem .9rem;
  backdrop-filter: blur(10px); box-shadow:0 8px 22px rgba(12,18,28,.06);
}
.chip-primary{ background:#fff; font-weight:600 }
.chip-outline{ background:transparent; color:#fff; border-color:#fff }

/* Form filter & chart responsive tanpa perlu .card wrapper */
@media (max-width: 576px){
  .filter-grid .col, .filter-grid .col-auto { max-width:100%; flex:0 0 100%; }
  .filter-grid .btn { width:100%; }
  .chart-canvas { display:block; width:100%; max-height:340px; }
  .btn { border-radius:14px; padding:.55rem .9rem; }
}

.equal-row .card-soft{ height:100%; }
@media (max-width:576px){ .chart-box{ height:300px; } }

/* hide quick chips everywhere */
.chips-scroll { display: none !important; }

/* ==== Offcanvas themed – GREEN to match navbar ==== */
.offcanvas-theme{
  /* gunakan warna dasar hijau dari variabel --bg */
  background:
    linear-gradient(180deg,
      color-mix(in srgb, var(--bg) 95%, #fff 5%),
      color-mix(in srgb, var(--bg) 90%, #000 10%)
    );
  /* fallback untuk browser tanpa color-mix */
  background:
    linear-gradient(180deg, rgba(15,81,50,.97), rgba(15,81,50,.93));
  border-right: 1px solid rgba(255,255,255,.18);
  color:#eaf6ef;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}
.offcanvas-theme .offcanvas-title{ font-weight:700; letter-spacing:.2px }
.offcanvas-theme .btn-close{ filter: invert(1) grayscale(100%); opacity:.9 }

/* links */
.offcanvas-theme .menu-link{
  background: transparent; color:#eaf6ef; border:0; padding:.85rem 0;
  border-radius:12px; transition: all .2s ease; display:block;
}
.offcanvas-theme .menu-link:hover{
  color:#fff; transform: translateX(2px);
}
.offcanvas-theme .menu-link.active{
  color:#fff; font-weight:700;
  background: rgba(255,255,255,.14);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.22);
  border-radius:12px; padding-left:.6rem;
}

/* buttons */
.offcanvas-theme .btn-menu-primary{
  background:#fff; color:var(--bg); border:1px solid #fff;
  border-radius:14px; padding:.6rem 1rem;
}
.offcanvas-theme .btn-menu-outline{
  background:transparent; color:#fff; border:1px solid rgba(255,255,255,.8);
  border-radius:14px; padding:.6rem 1rem;
}
.offcanvas-theme .btn-menu-warning{
  background:transparent; color:#ffe08a; border:1px solid rgba(255,224,138,.85);
  border-radius:14px; padding:.6rem 1rem;
}
.offcanvas-theme .btn-menu-primary:hover{ filter:brightness(.98) }
.offcanvas-theme .btn-menu-outline:hover{ background:rgba(255,255,255,.12) }
.offcanvas-theme .btn-menu-warning:hover{ background:rgba(255,224,138,.12) }

/* backdrop: sedikit gelap kehijauan supaya konsisten */
.offcanvas-backdrop{
  --bs-backdrop-bg: rgba(15,81,50,.85);
  --bs-backdrop-opacity: .45;
}

/* ==== Page transition (enter/leave) ==== */
main{ opacity:0; transform: translateY(8px); }
main.page-enter{ opacity:1; transform:none; transition:opacity .35s ease, transform .35s ease; }
body.page-leave main{ opacity:0; transform: translateY(6px); transition:opacity .18s ease, transform .18s ease; }

/* ===== Dashboard: Sisa Saldo ===== */
.sisa-card{ display:flex; flex-direction:column; align-items:center; justify-content:center; }
.sisa-card .sisa-label{ color: var(--text); color: color-mix(in srgb, var(--text) 90%, #000 10%); font-weight:600; margin-bottom:.4rem; font-size:1.05rem; }
.sisa-card .sisa-amount{ font-size:2.2rem; line-height:1.2; margin-bottom:.7rem; }
@media (min-width: 768px){ .sisa-card .sisa-amount{ font-size:3.2rem; } }
.sisa-card .sisa-actions{ margin-top:.2rem; }
.sisa-card .sisa-actions .btn{ border-radius:14px; padding:.6rem 1rem; }

/* Reusable section title (near-black, a bit larger) */
.muted-title{ color: var(--text); color: color-mix(in srgb, var(--text) 90%, #000 10%); font-weight:600; letter-spacing:.01em; font-size:1.05rem; }
html[data-theme="dark"] .muted-title{ color: var(--text); }

/* Subtle variant for smaller, gray headings (e.g., Goals Aktif) */
.muted-subtle{ color: var(--muted); font-weight:600; letter-spacing:.01em; font-size:.98rem; }

/* ===== Responsive stacked table (≤575.98px) ===== */
@media (max-width: 575.98px) {
  .table-stacked thead { display: none; }
  .table-stacked tbody tr {
    display: block;
    border: 1px solid rgba(0,0,0,.08);
    border-radius: 12px;
    margin-bottom: .75rem;
    overflow: hidden;
    background: var(--card);
  }
  .table-stacked tbody td {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: .75rem;
    padding: .6rem .9rem;
    border-top: 1px solid rgba(0,0,0,.04);
  }
  .table-stacked tbody td:first-child { border-top: 0; }
  .table-stacked tbody td::before {
    content: attr(data-label);
    font-weight: 600;
    color: var(--muted);
  }
  .table-stacked tbody td.action-cell { justify-content: flex-end; }
}

/* ===== Filter actions (desktop polish) ===== */
@media (min-width: 768px){
  .filter-actions .btn{
    border-radius: 14px;
    padding: .55rem 1rem;
  }
  .filter-actions .btn-primary{
    box-shadow: 0 8px 22px rgba(0,0,0,.08);
  }
  .filter-actions .btn-primary:hover{
    transform: translateY(-1px);
  }
  .filter-actions .btn-outline-secondary{
    border-color: var(--glass-border);
    background: transparent;
  }
}

/* Polesan tombol filter bar di desktop */
@media (min-width: 768px){
  #historyFilter .btn{ padding:.55rem 1rem; border-radius:14px; }
  #historyFilter .btn-primary{ box-shadow:0 8px 22px rgba(0,0,0,.08); }
  #historyFilter .btn-primary:hover{ transform:translateY(-1px); }
  #historyFilter .btn-outline-secondary{
    background:transparent;
    border-color:var(--glass-border);
  }
}

/* Sesuaikan tinggi komponen kecil pada filter bar (desktop) */
@media (min-width: 768px){
  #historyFilter .form-select.form-select-sm { min-height: 36px; }
  #historyFilter .btn-sm { padding: .4rem .85rem; border-radius: 12px; }
}

/* Rampingkan padding select di filter bar agar tombol Filter lebih lega (desktop) */
@media (min-width: 768px){
  #historyFilter .form-select-sm{
    padding-inline: .5rem;   /* dari default ~.75rem */
    min-height: 34px;
  }
  #historyFilter .btn{
    padding: .55rem 1.1rem;  /* tombol lebih “berisi” */
    border-radius: 12px;
  }
}

/* ====== Tambah transaksi (filter bar) ====== */
/* Selalu ada outline yang terlihat untuk tombol 'Tambah transaksi' */
#historyFilter .btn-outline-secondary{
  background: rgba(255,255,255,.88);
  color: var(--text);
  /* border pakai campuran warna teks biar kontras, dengan fallback */
  border: 1.5px solid color-mix(in srgb, var(--text) 14%, transparent);
  border-color: rgba(0,0,0,.14); /* fallback untuk browser tanpa color-mix */
  border-radius: 12px;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.04);
  transition: background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease, transform .1s ease;
}

#historyFilter .btn-outline-secondary:hover{
  background: #fff;
  color: var(--primary);
  border-color: var(--primary);
  box-shadow: 0 10px 24px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.03);
}

#historyFilter .btn-outline-secondary:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px var(--ring), inset 0 0 0 1px rgba(0,0,0,.03);
  border-color: var(--primary);
}

#historyFilter .btn-outline-secondary:active{
  transform: translateY(1px);
}

/* Dark theme tweak: tetap kontras */
html[data-theme="dark"] #historyFilter .btn-outline-secondary{
  background: rgba(255,255,255,.10);
  color: #e6edf3;
  border-color: color-mix(in srgb, #e6edf3 26%, transparent);
  border-color: rgba(255,255,255,.26);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
}
html[data-theme="dark"] #historyFilter .btn-outline-secondary:hover{
  background: rgba(255,255,255,.16);
  color: var(--primary);
  border-color: var(--primary);
}

#historyFilter .btn-outline-secondary:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px var(--ring);
  border-color: var(--primary);
}

#historyFilter .btn-outline-secondary:active{
  transform: translateY(1px);
}

/* Dark theme tweak: pastikan tetap kontras */
html[data-theme="dark"] #historyFilter .btn-outline-secondary{
  background: rgba(255,255,255,.08);
  color: #e6edf3;
  border-color: rgba(255,255,255,.28);
}
html[data-theme="dark"] #historyFilter .btn-outline-secondary:hover{
  background: rgba(255,255,255,.14);
  color: var(--primary);
  border-color: var(--primary);
}
